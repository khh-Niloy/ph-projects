{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file://C%3A/ph-projects/madchef-a11-next.js/lib/getDBCollectionName.js"],"sourcesContent":["const { MongoClient, ServerApiVersion } = require(\"mongodb\");\r\nconst uri = `mongodb+srv://${process.env.DB_USER}:${process.env.DB_PASS}@cluster0.m65dh.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0`;\r\n\r\nconst client = new MongoClient(uri, {\r\n  serverApi: {\r\n    version: ServerApiVersion.v1,\r\n    strict: true,\r\n    deprecationErrors: true,\r\n  },\r\n});\r\n\r\nexport default async function getDBCollectionName(collectionName) {\r\n  const clientPromise = await client.connect();\r\n  return clientPromise.db(\"madchef-next-js\").collection(collectionName);\r\n}\r\n"],"names":[],"mappings":";;;AAAA,MAAM,EAAE,WAAW,EAAE,gBAAgB,EAAE;AACvC,MAAM,MAAM,CAAC,cAAc,EAAE,QAAQ,GAAG,CAAC,OAAO,CAAC,CAAC,EAAE,QAAQ,GAAG,CAAC,OAAO,CAAC,yEAAyE,CAAC;AAElJ,MAAM,SAAS,IAAI,YAAY,KAAK;IAClC,WAAW;QACT,SAAS,iBAAiB,EAAE;QAC5B,QAAQ;QACR,mBAAmB;IACrB;AACF;AAEe,eAAe,oBAAoB,cAAc;IAC9D,MAAM,gBAAgB,MAAM,OAAO,OAAO;IAC1C,OAAO,cAAc,EAAE,CAAC,mBAAmB,UAAU,CAAC;AACxD","debugId":null}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file://C%3A/ph-projects/madchef-a11-next.js/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["import getDBCollectionName from \"@/lib/getDBCollectionName\";\r\nimport NextAuth from \"next-auth\";\r\nimport CredentialsProvider from \"next-auth/providers/credentials\";\r\nimport bcrypt from \"bcryptjs\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nconst handler = NextAuth({\r\n  providers: [\r\n    CredentialsProvider({\r\n      name: \"Credentials\",\r\n      credentials: {\r\n        email: { label: \"Email\", type: \"email\" },\r\n        password: { label: \"Password\", type: \"password\" },\r\n      },\r\n      async authorize(credentials, req) {\r\n        const { email, password } = credentials;\r\n        const userCollection = await getDBCollectionName(\"user\");\r\n\r\n        try {\r\n          const user = await userCollection.findOne({ email: email });\r\n\r\n          if (!user) {\r\n            return null;\r\n          }\r\n\r\n          const isPasswordOK = await bcrypt.compare(password, user.password);\r\n\r\n          if (!isPasswordOK) {\r\n            return null;\r\n          }\r\n          return user;\r\n        } catch (error) {\r\n          return NextResponse.json({ error: error });\r\n        }\r\n      },\r\n    }),\r\n  ],\r\n  pages: {\r\n    signIn: \"/login\",\r\n  },\r\n  callbacks: {\r\n    async jwt({ token, user }) {\r\n      if (user) {\r\n        console.log(user);\r\n        token.id = user.id;\r\n        token.role = user.role;\r\n        token.photo = user.photo;\r\n        token.email = user.email;\r\n      }\r\n      return token;\r\n    },\r\n    async session({ session, token }) {\r\n      session.user.photo = token.photo;\r\n      session.user.role = token.role;\r\n      return session;\r\n    },\r\n  },\r\n});\r\n\r\nexport { handler as GET, handler as POST };\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AAEA,MAAM,UAAU,CAAA,GAAA,uIAAA,CAAA,UAAQ,AAAD,EAAE;IACvB,WAAW;QACT,CAAA,GAAA,0JAAA,CAAA,UAAmB,AAAD,EAAE;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW,EAAE,GAAG;gBAC9B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG;gBAC5B,MAAM,iBAAiB,MAAM,CAAA,GAAA,4HAAA,CAAA,UAAmB,AAAD,EAAE;gBAEjD,IAAI;oBACF,MAAM,OAAO,MAAM,eAAe,OAAO,CAAC;wBAAE,OAAO;oBAAM;oBAEzD,IAAI,CAAC,MAAM;wBACT,OAAO;oBACT;oBAEA,MAAM,eAAe,MAAM,mIAAA,CAAA,UAAM,CAAC,OAAO,CAAC,UAAU,KAAK,QAAQ;oBAEjE,IAAI,CAAC,cAAc;wBACjB,OAAO;oBACT;oBACA,OAAO;gBACT,EAAE,OAAO,OAAO;oBACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;wBAAE,OAAO;oBAAM;gBAC1C;YACF;QACF;KACD;IACD,OAAO;QACL,QAAQ;IACV;IACA,WAAW;QACT,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM;gBACR,QAAQ,GAAG,CAAC;gBACZ,MAAM,EAAE,GAAG,KAAK,EAAE;gBAClB,MAAM,IAAI,GAAG,KAAK,IAAI;gBACtB,MAAM,KAAK,GAAG,KAAK,KAAK;gBACxB,MAAM,KAAK,GAAG,KAAK,KAAK;YAC1B;YACA,OAAO;QACT;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,QAAQ,IAAI,CAAC,KAAK,GAAG,MAAM,KAAK;YAChC,QAAQ,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI;YAC9B,OAAO;QACT;IACF;AACF","debugId":null}}]
}